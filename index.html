<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Simulado JS Cursos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f8f8;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 50px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      color: #d62828;
      text-align: center;
    }
    input, textarea, select {
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      border: 2px solid #d62828;
      border-radius: 5px;
    }
    button {
      background-color: #d62828;
      color: white;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
    }
    #formAdicionar {
      display: none;
    }
    #cadeadoBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: transparent;
      border: none;
      cursor: pointer;
    }
    #cadeadoBtn img {
      width: 32px;
      height: 32px;
    }
    .questao {
      background: #fff4f4;
      border: 1px solid #ddd;
      border-left: 4px solid #d62828;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 5px;
    }
    .questao img {
      max-width: 100%;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Simulado JS Cursos</h2>
  <div id="questoesContainer"></div>
</div>

<!-- Formulário oculto para adicionar questões -->
<div class="container" id="formAdicionar">
  <h2>Adicionar Questão</h2>
  <textarea id="pergunta" placeholder="Digite a nova pergunta"></textarea>
  <input type="text" id="alt1" placeholder="Alternativa 1">
  <input type="text" id="alt2" placeholder="Alternativa 2">
  <input type="text" id="alt3" placeholder="Alternativa 3">
  <input type="text" id="alt4" placeholder="Alternativa 4">
  <select id="correta">
    <option value="">Selecione a alternativa correta</option>
    <option value="1">Alternativa 1</option>
    <option value="2">Alternativa 2</option>
    <option value="3">Alternativa 3</option>
    <option value="4">Alternativa 4</option>
  </select>
  <input type="file" id="imagem">
  <button onclick="salvarQuestao()">Salvar Questão</button>
</div>

<!-- Botão cadeado -->
<button id="cadeadoBtn" onclick="pedirSenha()">
  <img src="https://img.icons8.com/ios-filled/50/lock--v1.png" alt="Cadeado">
</button>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script>
  // TODO: substitua pelos dados do seu projeto Firebase
  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_DOMINIO.firebaseapp.com",
    databaseURL: "https://SEU_PROJETO.firebaseio.com",
    projectId: "SEU_PROJETO",
    storageBucket: "SEU_PROJETO.appspot.com",
    messagingSenderId: "SEU_SENDER_ID",
    appId: "SEU_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const storage = firebase.storage();

  const senhaAdmin = "123456"; // você pode trocar isso

  function pedirSenha() {
    const senha = prompt("Digite a senha de administrador:");
    if (senha === senhaAdmin) {
      document.getElementById('formAdicionar').style.display = 'block';
    } else {
      alert("Senha incorreta!");
    }
  }

  function salvarQuestao() {
    const pergunta = document.getElementById('pergunta').value;
    const alt1 = document.getElementById('alt1').value;
    const alt2 = document.getElementById('alt2').value;
    const alt3 = document.getElementById('alt3').value;
    const alt4 = document.getElementById('alt4').value;
    const correta = document.getElementById('correta').value;
    const imagemFile = document.getElementById('imagem').files[0];

    if (!pergunta || !alt1 || !alt2 || !alt3 || !alt4 || !correta) {
      alert("Preencha todos os campos.");
      return;
    }

    const novaQuestaoRef = db.ref("questoes").push();
    const questaoId = novaQuestaoRef.key;

    const salvarNoDB = (urlImagem = "") => {
      novaQuestaoRef.set({
        pergunta,
        alternativas: [alt1, alt2, alt3, alt4],
        correta,
        imagem: urlImagem
      });
      alert("Questão salva!");
      document.getElementById("formAdicionar").reset();
    };

    if (imagemFile) {
      const storageRef = storage.ref("imagens/" + questaoId);
      storageRef.put(imagemFile).then(snapshot => {
        snapshot.ref.getDownloadURL().then(url => {
          salvarNoDB(url);
        });
      });
    } else {
      salvarNoDB();
    }
  }

  function carregarQuestoes() {
    db.ref("questoes").on("value", snapshot => {
      const container = document.getElementById("questoesContainer");
      container.innerHTML = "";
      snapshot.forEach(child => {
        const q = child.val();
        const div = document.createElement("div");
        div.className = "questao";
        div.innerHTML = `<strong>${q.pergunta}</strong><br><br>
          A) ${q.alternativas[0]}<br>
          B) ${q.alternativas[1]}<br>
          C) ${q.alternativas[2]}<br>
          D) ${q.alternativas[3]}<br>
          <em>Correta: ${q.alternativas[q.correta - 1]}</em>`;
        if (q.imagem) {
          const img = document.createElement("img");
          img.src = q.imagem;
          div.appendChild(img);
        }
        container.appendChild(div);
      });
    });
  }

  carregarQuestoes();
</script>

</body>
</html>
